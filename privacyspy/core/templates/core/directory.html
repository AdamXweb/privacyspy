{% extends 'core/base.html' %}

{% load humanize %}

{% block content %}
<h1 class="title massive" style="margin-bottom: 12px;">Directory</h1>
<div class="columns">
    <div class="column is-4">
        <form method="GET">
            <div class="control has-icons-right min-width-20">
                <input class="input search-input is-large" name="search" type="text"
                    placeholder="Search {{num_policies|intcomma}} privacy policies..."
                    {% if search != None %}value="{{search}}" {% endif %}>
                <span class="icon is-small is-right has-cursor-pointer" onclick="$(this).submit()">
                    <i class="fas fa-search"></i>
                </span>
            </div>
        </form>
    </div>
</div>

<br>
{% if search %}
<div class="notification">
    Your search yielded {{products|length|intcomma}} results.
    {% if overflow %}
    Only the first 50 results are shown. If you don't see what you are looking for, try narrowing your search.
    {% endif %}
    <a href="{% url 'directory' %}">Clear search.</a>
</div>
{% endif %}
<br>

<div class="columns">

    {% for product in products %}
    <div class="column">{% include 'core/product_box.html' %}</div>
    {% if forloop.counter|divisibleby:"3" and not forloop.last %}
</div>
<div class="row">
    {% endif %}
    {% endfor %}

</div>

{% endblock %}